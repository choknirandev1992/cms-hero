{% extends 'backend/base.html' %}
{% load static %}

{% block pagecontent %}

      <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="student-dashboard.html">Home</a></li>
                            <li class="breadcrumb-item active">Dashboard</li>
                        </ol>
                        <h1 class="h2">Dashboard</h1>

                        <div class="card border-left-3 border-left-primary card-2by1">
                            <div class="card-body">
                                <div class="media flex-wrap align-items-center">
                                    <div class="media-left">
                                        <i class="material-icons text-muted-light">credit_card</i>
                                    </div>
                                    <div class="media-body" style="min-width: 180px">
                                        Your subscription ends on <strong>25 February 2015</strong>
                                    </div>
                                    <div class="media-right mt-2 mt-xs-plus-0">
                                        <a class="btn btn-success" href="student-account-billing-upgrade.html">Upgrade</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-header d-flex align-items-center">
                                        <div class="h2 mb-0 mr-3 text-primary">116</div>
                                        <div class="flex">
                                            <h4 class="card-title">Angular</h4>
                                            <p class="card-subtitle">Best score</p>
                                        </div>
                                        <div class="dropdown">
                                            <a href="#" class="dropdown-toggle text-black-70" data-toggle="dropdown">Popular Topics</a>
                                            <div class="dropdown-menu dropdown-menu-right">
                                                <a href="" class="dropdown-item">Popular Topics</a>
                                                <a href="" class="dropdown-item">Web Design</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart" style="height: 319px;">
                                            <canvas id="topicIqChart" class="chart-canvas"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



{% endblock %}
{% block scriptcustom %}
 <script>
        (function() {
            'use strict';

            Charts.init()

            var earnings = []

            // Create a date range for the last 7 days
            var start = moment().subtract(6, 'days').format('YYYY-MM-DD') // 7 days ago
            var end = moment().format('YYYY-MM-DD') // today
            var range = moment.range(start, end)

            // Create the earnings graph data
            // Iterate the date range and assign a random ($) earnings value for each day
            range.by('days', function(moment) {
                earnings.push({
                    y: Math.floor(Math.random() * 200) + 15,
                    x: moment.toDate()
                })
            })

            var WeekIQChart = function(id, type = 'line', options = {}) {
                options = Chart.helpers.merge({
                    elements: {
                        point: {
                            pointStyle: 'circle',
                            radius: 4,
                            hoverRadius: 5,
                            backgroundColor: settings.colors.white,
                            borderColor: settings.colors.primary[500],
                            borderWidth: 2
                        }
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                display: false
                            }
                        }],
                        xAxes: [{
                            gridLines: {
                                display: false
                            },
                            type: 'time',
                            distribution: 'series',
                            time: {
                                unit: 'day',
                                stepSize: 1,
                                autoSkip: false,
                                displayFormats: {
                                    day: 'dd'
                                }
                            }
                        }]
                    },
                    tooltips: {
                        callbacks: {
                            label: function(a, e) {
                                var t = e.datasets[a.datasetIndex].label || "",
                                    o = a.yLabel,
                                    r = "";
                                return 1 < e.datasets.length && (r += '<span class="popover-body-label mr-auto">' + t + "</span>"), r += '<span class="popover-body-value">' + o + " points</span>"
                            }
                        }
                    }
                }, options)

                var data = {
                    datasets: [{
                        label: "Experience IQ",
                        data: earnings,
                        pointHoverBorderColor: settings.colors.success[400],
                        pointHoverBackgroundColor: settings.colors.white
                    }]
                }

                Charts.create(id, type, options, data)
            }

            var TopicIQChart = function(id, type = 'radar', options = {}) {
                options = Chart.helpers.merge({
                    elements: {
                        point: {
                            pointStyle: 'circle',
                            radius: 4,
                            hoverRadius: 5,
                            backgroundColor: settings.colors.white,
                            borderColor: settings.colors.primary[500],
                            borderWidth: 2
                        }
                    },
                    scale: {
                        ticks: {
                            display: false,
                            beginAtZero: true,
                            maxTicksLimit: 4
                        },
                        gridLines: {
                            color: settings.colors.gray[300]
                        },
                        angleLines: {
                            color: settings.colors.gray[300]
                        },
                        pointLabels: {
                            fontSize: 14
                        }
                    },
                    tooltips: {
                        callbacks: {
                            label: function(a, e) {
                                var t = e.datasets[a.datasetIndex].label || "",
                                    o = a.yLabel,
                                    r = "";
                                return 1 < e.datasets.length && (r += '<span class="popover-body-label mr-auto">' + t + "</span>"), r += '<span class="popover-body-value">' + o + " points</span>"
                            }
                        }
                    }
                }, options)

                var data = {
                    labels: ["JavaScript", "HTML", "Flinto", "Vue.js", "Sketch", "Priciple", "CSS", "Angular"],
                    datasets: [{
                        label: "Experience IQ",
                        data: [30, 35, 33, 32, 31, 30, 28, 36],
                        pointHoverBorderColor: settings.colors.success[400],
                        pointHoverBackgroundColor: settings.colors.white,
                        borderJoinStyle: 'bevel',
                        lineTension: .1
                    }]
                }

                Charts.create(id, type, options, data)
            }

            // Create Chart
            WeekIQChart('#iqChart')
            TopicIQChart('#topicIqChart')

        })()
    </script>
{% endblock %}